<!DOCTYPE html>
<html lang="en">

<head>
    <title>KSON Editor</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        #monaco-editor-root {
            position: absolute;
            top: 140px;
            left: 0;
            right: 0;
            bottom: 0;
        }
    </style>
</head>

<body>
    <div class="header">
        <h1>KSON Monaco Editor</h1>
    </div>

    <div id="monaco-editor-root"></div>
    
    <script type="module">
        import { createKsonEditor, } from './src/index.js';

        let currentWrapper = null;

        async function startEditor() {
            if (currentWrapper) {
                console.log('Editor already started');
                return;
            }

            const rootElement = document.getElementById('monaco-editor-root');

            currentWrapper = await createKsonEditor(
                {
                    rootElement,
                    editorAppConfig: {
                        codeResources: {
                            modified: {
                                text: '{\n  # Welcome to KSON editor!\n  "hello": "world"\n}',
                                uri: '/test.kson'
                            }
                        }
                    }
                });


            currentWrapper.start(rootElement).then(() => {
                console.log(`${currentLanguage.toUpperCase()} editor started successfully`);
            }).catch((error) => {
                console.error(`Failed to start ${currentLanguage} editor:`, error);
            });
        }
        // Start the editor automatically
        startEditor();
    </script>
</body>

</html>
